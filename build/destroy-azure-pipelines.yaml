trigger: none

pool:
  vmImage: 'ubuntu-latest'

variables:
  - group: 'AccessTokens'
  - name: BN
    value: replace('$(BRANCHNAME)', ‘/‘, ‘-‘)

steps:
- script: echo Hello, world, Branch name is $(BRANCHNAME)!
  displayName: 'Run a one-line script'

- script: echo $BN
  displayName: debug line

- task: Pulumi@1
  condition: or(eq(variables['Build.Reason'], 'PullRequest'), eq(variables['Build.Reason'], 'Manual'))
  inputs:
    azureSubscription: 'Service connection for Pulumi'
    command: 'destroy'
    cwd: 'infra/'
    stack: $BN
    